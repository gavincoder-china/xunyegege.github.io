(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{278:function(s,a,t){"use strict";t.r(a);var n=t(38),e=Object(n.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"分布式微服务专栏010-springcloud中的超时问题解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分布式微服务专栏010-springcloud中的超时问题解决方案","aria-hidden":"true"}},[s._v("#")]),s._v(" 分布式微服务专栏010(SpringCloud中的超时问题解决方案)")]),s._v(" "),t("h3",{attrs:{id:"负载均衡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡","aria-hidden":"true"}},[s._v("#")]),s._v(" 负载均衡")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("全局设置：\n\nribbon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReadTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60000")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConnectTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60000")]),s._v("\n    \n局部设置：\n\nservice"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  ribbon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReadTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConnectTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("    \n      \n其中，service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("id 是"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ribbon")]),s._v("所使用的虚拟主机名，一般和"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Eureka")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Server")]),s._v("上注册的服务名称一致，即：与spring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("application"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name 一致。      \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"fegin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fegin","aria-hidden":"true"}},[s._v("#")]),s._v(" Fegin")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Feign")]),s._v("的超时\n从"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Spring")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Cloud")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Edgware")]),s._v("开始，"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Feign")]),s._v("支持使用属性配置超时：\n\nfeign"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  client"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    config"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      feignName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        connectTimeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n        readTimeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n          \n对于老版本，可以写个feign"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Options")]),s._v(" ，参考：org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cloud"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("netflix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("feign"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ribbon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FeignRibbonClientAutoConfiguration")]),s._v("#feignRequestOptions 的写法即可。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"resttemplate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resttemplate","aria-hidden":"true"}},[s._v("#")]),s._v(" RestTemplate")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v("的超时\n一些时，我们可能使用了"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v("，例如\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@LoadBalanced")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("restTemplate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n此时，超时可使用如下方式设置：\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@LoadBalanced")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("restTemplate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SimpleClientHttpRequestFactory")]),s._v(" simpleClientHttpRequestFactory "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SimpleClientHttpRequestFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  simpleClientHttpRequestFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setConnectTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  simpleClientHttpRequestFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setReadTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("simpleClientHttpRequestFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"zuul"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zuul","aria-hidden":"true"}},[s._v("#")]),s._v(" Zuul")]),s._v(" "),t("p",[s._v("Zuul的超时比较复杂，因为Zuul整合了Ribbon、Hystrix。下面分两种情况讨论：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("如果"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Zuul")]),s._v("的路由使用了"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ribbon")]),s._v("\n那么："),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Zuul")]),s._v("的超时则与"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ribbon")]),s._v("、"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hystrix")]),s._v("相关，此时"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Zuul")]),s._v("的超时可以配置类似如下：\n\nhystrix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      execution"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        isolation"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n          thread"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n            timeoutInMilliseconds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\nribbon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReadTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConnectTimeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n  \n代码解析：此种情况下，"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Zuul")]),s._v("转发所使用的过滤器是org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cloud"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("netflix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zuul"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("filters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RibbonRoutingFilter")]),s._v(" ，在这个过滤器中，整合了"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hystrix")]),s._v("以及"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ribbon")]),s._v("。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("如果"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Zuul")]),s._v("的路由未使用"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ribbon")]),s._v("\n例如："),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Zuul")]),s._v("的路由配置如下：\n\nzuul"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  routes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("route"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("                   # 该配置方式中，user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("route只是给路由一个名称，可以任意起名。\n      url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("localhost"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" # 指定的url\n      path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**              # url对应的路径。\n      \n那么，此时Zuul的超时只与如下两个配置有关：\n\nzuul:\n  host:\n    socket-timeout-millis: 10000\n    connect-timeout-millis: 2000\n    \n代码解析：直接配置URL路由的方式，用不上Ribbon，也用不上Hystrix，Zuul转发所使用的过滤器是org.springframework.cloud.netflix.zuul.filters.route.SimpleHostRoutingFilter ，在这个过滤器中，Zuul使用Apache HttpClient进行转发。\n")])])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("在现实场景中，有时候可能两种路由方式配合使用，因此，建议大家配置以上所有属性。")]),s._v(" "),t("p",[s._v("官方文档：http://cloud.spring.io/spring-cloud-static/Edgware.RELEASE/single/spring-cloud.html#_zuul_timeouts")]),s._v(" "),t("h3",{attrs:{id:"hystrix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hystrix","aria-hidden":"true"}},[s._v("#")]),s._v(" Hystrix")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("hystrix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      execution"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        timeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n          enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n        isolation"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n          thread"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n            timeoutInMilliseconds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n如上，"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hystrix")]),s._v("的默认超时时间是"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("秒。默认开启超时机制。如需关闭"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hystrix")]),s._v("的超时，可将xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enabled设置为"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("。\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tips")]),s._v("\n如有组件跟"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hystrix")]),s._v("配合使用，一般来讲，建议"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Hystrix")]),s._v("的超时 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 其他组件的超时，否则将可能导致重试特性失效。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])])},[],!1,null,null,null);a.default=e.exports}}]);